# 圈地大作战

## 1. 项目概况

#### 1.1 项目背景

​		圈地大作战是一款十分经典且有趣的小游戏，非常考验玩家的反应速度与心理博弈。在游戏中，玩家需要不断增加自己的领地面积的同时保护自己不被对手击杀。

#### 1.2 项目管理

- 版本控制：github
- 开发环境：QT 5.15
- 编程语言：C++17
- 框架结构：MVVM
- 文档编写：MarkDown

#### 1.3 小组信息

- 小组名称：圈地大作战组
- 小组成员：张书祺、骆一博、徐铭
- 选        题：圈地大作战游戏



## 2. 详细功能说明

#### 2.1 功能列表

​		通过键盘实现不同玩家的控制: 

- 玩家一：
  - A：    改变移动方向向左
  - W：   改变移动方向向上
  - D：    改变移动方向向右
  - S：     改变移动方向向下
- 玩家二：
  - ←：   改变移动方向向左
  - ↑：     改变移动方向向上
  - →：   改变移动方向向右
  - ↓：     改变移动方向向下
- 玩家三：
  - 1：     改变移动方向向左
  - 5：     改变移动方向向上
  - 3：     改变移动方向向右
  - 2：     改变移动方向向下
- 玩家四：
  - J：      改变移动方向向左
  - I：      改变移动方向向上
  - L：     改变移动方向向右
  - K：     改变移动方向向下

#### 2.2 界面展示

图片：游戏页面

#### 2.3 游戏目标

​		在倒计时结束时领地最大的玩家获得胜利。

#### 2.4 游戏攻略

- 玩家从自己的领地出发，当再次回到自己的领地时，会将路径所围的格子涂成自己的颜色，玩家得分为自己所属颜色作图成的格子数
- 当玩家操控的角色撞击到另一个玩家的路径上时，会击杀另一玩家，被击杀的玩家的领地会消失。
- 撞上自己的路径会自杀。



## **3. 非功能性需求**

#### 3.1 系统需求

- 正确配置Qt后，所有系统都能编译执行。

#### 3.2 性能需求

- 尽量保证用户在进行游戏时不会出现卡顿等影响游戏体验的现象。
- 当前版本只支持单机游戏，但支持2~4人一起游戏。



## 4. 项目规划

#### 4.1 框架描述

​		游戏采用MVVM (Model- View- ViewModel) 架构，主要由视图 (View)、视图模型 (ViewModel)、模型 (Model)、App层四部分组成，通过这四部分实现 UI 逻辑、呈现逻辑和状态控制、数据与业务逻辑的分离，实现了模块的独立开发。

- Common

​		全局的宏定义、枚举类型。

​		操作指令类，纯虚类`Commands`作为View中接口。具体的指令是其子类，在ViewModel层中实现。

- Model & View Model

操作实体的内部定义，内部逻辑的实现。实现碰撞检测、人物位置更新等等功能。

- View

​		处理界面反馈逻辑（键盘事件，定时器），以及绘制界面功能。用`command->exec()`的形式在接入Model&View Model层的功能。如果需要访问Model层的数据，在类内定义对应对应的仿函数。如`std::function<QPoint(void)> get_ice_pos`是获取冰人位置的仿函数，在App层再利用lambda表达式，绑定到Model & View Model层提供的访问接口上。

- App

​		将View层的共享指针、仿函数绑定到Model&View Model上。

#### 4.2 实现过程

**第一轮迭代**

- [x] 实现MVVM框架的搭建
- [x] 实现主窗口
- [x] 实现冰火人在地面上的移动控制
- [x] 完成基本的素材收集与设计，包括人物形象与背景音乐等

**第二轮迭代**

- [x] 完善地图界面（无机关）
- [x] 完善火人火人的UI
- [x] 完成冰火人和墙面的交互（碰撞检测与处理）



## 5. 小组分工

- 张书祺
  - Common层实现
  - ViewModel层实现
  - 文档撰写
- 骆一博
  - Model层实现
- 徐铭
  - View层实现
  - App层实现

